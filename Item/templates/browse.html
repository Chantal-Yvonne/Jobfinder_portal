{% extends "base.html" %}
{% block title %}Find A Job{% endblock title %}
{% block content %}
<h1>Browse Jobs</h1>

<form method="get" class="filters-form" style="margin-bottom: 1em;">
  <input type="text" name="position" placeholder="Position" value="{{ position_filter }}">
  <input type="text" name="company" placeholder="Company" value="{{ company_filter }}">

  <select name="category">
    <option value="">All Categories</option>
    {% for key, value in categories %}
      <option value="{{ key }}" {% if key == category_filter %}selected{% endif %}>{{ value }}</option>
    {% endfor %}
  </select>

  <select name="job_type">
    <option value="">All Job Types</option>
    {% for key, value in job_types %}
      <option value="{{ key }}" {% if key == job_type_filter %}selected{% endif %}>{{ value }}</option>
    {% endfor %}
  </select>

  <button type="submit" class="btn btn-primary">Filter</button>
  <a href="{% url 'item:browse' %}" class="btn btn-secondary" style="margin-left: 10px;">Clear Filters</a>
</form>

{% if jobs %}
  <ul class="job-list">
    {% for job in jobs %}
      <li>
        <a href="{% url 'item:detail' job.id %}">{{ job.job_position }} at {{ job.company_name }}</a>
        {% if job.id in applied_job_ids %}
          <span class="applied-label">Applied</span>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No jobs found matching your criteria.</p>
{% endif %}
{% endblock %}
